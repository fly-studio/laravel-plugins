!function(t){function e(i){if(r[i])return r[i].exports;var s=r[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var r={};e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,i){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=33)}([function(t,e){t.exports=function(t,e,r,i){var s,n=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(s=t,n=t.default);var o="function"==typeof n?n.options:n;if(e&&(o.render=e.render,o.staticRenderFns=e.staticRenderFns),r&&(o._scopeId=r),i){var l=o.computed||(o.computed={});Object.keys(i).forEach(function(t){var e=i[t];l[t]=function(){return e}})}return{esModule:s,exports:n,options:o}}},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e];r[2]?t.push("@media "+r[2]+"{"+r[1]+"}"):t.push(r[1])}return t.join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},s=0;s<this.length;s++){var n=this[s][0];"number"==typeof n&&(i[n]=!0)}for(s=0;s<e.length;s++){var a=e[s];"number"==typeof a[0]&&i[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(t,e,r){function i(t){for(var e=0;e<t.length;e++){var r=t[e],i=c[r.id];if(i){i.refs++;for(var s=0;s<i.parts.length;s++)i.parts[s](r.parts[s]);for(;s<r.parts.length;s++)i.parts.push(a(r.parts[s]));i.parts.length>r.parts.length&&(i.parts.length=r.parts.length)}else{for(var n=[],s=0;s<r.parts.length;s++)n.push(a(r.parts[s]));c[r.id]={id:r.id,refs:1,parts:n}}}}function s(t,e){for(var r=[],i={},s=0;s<e.length;s++){var n=e[s],a=n[0],o=n[1],l=n[2],u=n[3],c={css:o,media:l,sourceMap:u};i[a]?(c.id=t+":"+i[a].parts.length,i[a].parts.push(c)):(c.id=t+":0",r.push(i[a]={id:a,parts:[c]}))}return r}function n(){var t=document.createElement("style");return t.type="text/css",p.appendChild(t),t}function a(t){var e,r,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]'),s=null!=i;if(s&&h)return m;if(v){var a=f++;i=d||(d=n()),e=o.bind(null,i,a,!1),r=o.bind(null,i,a,!0)}else i=i||n(),e=l.bind(null,i),r=function(){i.parentNode.removeChild(i)};return s||e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else r()}}function o(t,e,r,i){var s=r?"":i.css;if(t.styleSheet)t.styleSheet.cssText=g(e,s);else{var n=document.createTextNode(s),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(n,a[e]):t.appendChild(n)}}function l(t,e){var r=e.css,i=e.media,s=e.sourceMap;if(i&&t.setAttribute("media",i),s&&(r+="\n/*# sourceURL="+s.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var u="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!u)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s=r(23),c={},p=u&&(document.head||document.getElementsByTagName("head")[0]),d=null,f=0,h=!1,m=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,r){h=r;var n=s(t,e);return i(n),function(e){for(var r=[],a=0;a<n.length;a++){var o=n[a],l=c[o.id];l.refs--,r.push(l)}e?(n=s(t,e),i(n)):n=[];for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete c[l.id]}}}};var g=function(){var t=[];return function(e,r){return t[e]=r,t.filter(Boolean).join("\n")}}()},,function(t,e,r){"use strict";Vue.component("action",r(12)),Vue.component("action-list",r(9)),Vue.component("action-parameter",r(11)),Vue.component("image-upload",r(13))},function(t,e,r){e=t.exports=r(1)(),e.push([t.i,".action-parameter .page-header{margin:0 0 5px}.action-remove{margin-right:25px}",""])},function(t,e,r){e=t.exports=r(1)(),e.push([t.i,".image-upload .thumb,.image-upload .webuploader-pick{width:200px;height:200px;background-color:transparent;padding:0}.image-upload .thumb,.image-upload .thumb .progress-text{top:0;line-height:200px;text-align:center;position:absolute}.image-upload{position:relative}.image-upload .webuploader-container{z-index:3}.image-upload .webuploader-pick{border:0}.image-upload .pick{height:200px;width:200px;display:block}.image-upload .thumb{left:0;z-index:1;display:table-cell;vertical-align:middle;margin:0}.image-upload .thumb img{max-width:200px;max-height:200px;vertical-align:middle}.image-upload .thumb .progress{width:100%;position:absolute;left:0;top:0;height:100%;background-color:rgba(0,0,0,.8)}.image-upload .thumb .progress-text{width:100%;left:0;height:100%;color:#fff;z-index:2}",""])},,,function(t,e,r){var i=r(0)(r(26),r(16),null,null);t.exports=i.exports},function(t,e,r){var i=r(0)(r(27),r(17),null,null);t.exports=i.exports},function(t,e,r){var i=r(0)(r(28),r(15),null,null);t.exports=i.exports},function(t,e,r){r(21);var i=r(0)(r(29),r(18),null,null);t.exports=i.exports},function(t,e,r){r(22);var i=r(0)(r(30),r(20),null,null);t.exports=i.exports},,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-sm-2",attrs:{for:""}},[t._v(t._s(t.config.title))]),t._v(" "),r("div",{staticClass:"col-sm-10"},[["select","radio","checkbox"].indexOf(t.config.type)==-1?r("input",{staticClass:"form-control",attrs:{type:t.config.type?t.config.type:"text",placeholder:t.config.placeholder?t.config.placeholder:"["+t.config.title+"]"},domProps:{value:t.value},on:{input:function(e){t.change(e.target.value)}}}):"radio"==t.config.type?r("div",{},[t._l(t.config.list,function(e,i){return r("label",{staticClass:"radio-inline"},[r("input",{attrs:{type:"radio",name:t.radioName},domProps:{value:i,checked:t.value==i},on:{change:function(e){t.change(e.target.value)}}}),t._v(" "+t._s(e)+"\r\n\t\t\t")])}),t._v(" "),r("div",{staticClass:"clearfix"})],2):"checkbox"==t.config.type?r("div",{},[t._l(t.config.list,function(e,i){return r("label",{staticClass:"checkbox-inline"},[r("input",{attrs:{type:"checkbox"},domProps:{value:i,checked:t.value instanceof Array&&t.value.indexOf(i)>-1},on:{change:function(e){t.multi(e.target)}}}),t._v(" "+t._s(e)+"\r\n\t\t\t")])}),t._v(" "),r("div",{staticClass:"clearfix"})],2):r("select",{staticClass:"form-control",attrs:{multiple:t.config.multiple},on:{change:function(e){t.select(e.target)}}},t._l(t.config.list,function(e,i){return r("option",{domProps:{value:i,selected:t.value instanceof Array?t.value.indexOf(i)>-1:i==t.value}},[t._v(t._s(e))])}))]),t._v(" "),r("div",{staticClass:"clearfix"})])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container12"},[t._l(t.list,function(e,i){return r("action",{ref:"action",refInFor:!0,attrs:{k:i,name:t.name+"-"+i},on:{remove:t.remove},model:{value:t.list[i],callback:function(e){var r=t.list,s=i;Array.isArray(r)?r.splice(s,1,e):t.list[i]=e}}})}),t._v(" "),r("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){t.create()}}},[r("i",{staticClass:"glyphicon glyphicon-plus"}),t._v(" 新增一条")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.json,expression:"json"}],staticClass:"form-control hidden",attrs:{rows:"10",name:t.name},domProps:{value:t.json},on:{input:function(e){e.target.composing||(t.json=e.target.value)}}})],2)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._l(t.fields,function(e,i){return r("action-parameter",{attrs:{settings:e},model:{value:t.$store.state.parameters[i],callback:function(e){var r=t.$store.state.parameters,s=i;Array.isArray(r)?r.splice(s,1,e):t.$store.state.parameters[i]=e}}})}))},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("div",{staticClass:"page-header"},[r("h3",[t._v("\r\n\t\t\t"+t._s(t.$store.state.title?t.$store.state.title:"未命名")+"\r\n\t\t\t"),void 0!=t.k?r("span",{staticClass:"pull-right action-remove"},[r("a",{attrs:{href:"javascript:"},on:{click:function(e){t.remove()}}},[t._v("×")])]):t._e()])]),t._v(" "),r("div",{staticClass:"col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-sm-2 control-label",attrs:{for:""}},[t._v("标题：")]),t._v(" "),r("div",{staticClass:"col-sm-10"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.title,expression:"$store.state.title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.$store.state.title},on:{input:function(e){e.target.composing||(t.$store.state.title=e.target.value)}}})]),t._v(" "),r("div",{staticClass:"clearfix"})]),t._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-sm-2 control-label",attrs:{for:""}},[t._v("图片：")]),t._v(" "),r("div",{staticClass:"col-sm-10"},[r("image-upload",{model:{value:t.$store.state.img,callback:function(e){t.$store.state.img=e}}})],1),t._v(" "),r("div",{staticClass:"clearfix"})])]),t._v(" "),r("div",{staticClass:"action-parameter col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"col-sm-2",attrs:{for:""}},[t._v("类型：")]),t._v(" "),r("div",{staticClass:"col-sm-10"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.method,expression:"$store.state.method"}],staticClass:"form-control",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$store.state.method=e.target.multiple?r:r[0]}}},t._l(t.methods,function(e,i){return r("option",{domProps:{value:i}},[t._v(t._s(e))])}))]),t._v(" "),r("div",{staticClass:"clearfix"})]),t._v(" "),r("div",{staticClass:"form-group"},[t._m(0),t._v(" "),r("div",{staticClass:"clearfix"}),t._v(" "),r("keep-alive",[r("action-method-"+t.method,{tag:"component",attrs:{parameters:t.parameters}})],1)],1)]),t._v(" "),r("div",{staticClass:"clearfix"}),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.json,expression:"json"}],staticClass:"form-control hidden",attrs:{rows:"10",name:t.name},domProps:{value:t.json},on:{input:function(e){e.target.composing||(t.json=e.target.value)}}})])},staticRenderFns:[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-sm-12"},[r("h5",{staticClass:"page-header"},[t._v("参数：")])])}]}},,function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"image-upload"},[r("div",{staticClass:"pick",attrs:{id:t.options.pick_id}}),t._v(" "),r("div",{staticClass:"thumb",attrs:{id:"thumb-"+t.options.pick_id}},[r("img",{attrs:{src:"plugins/img/select-img.png",alt:""}}),t._v(" "),t.progress>0?r("div",{staticClass:"progress",style:{height:~~(100-t.progress)+"%"}}):t._e(),t._v(" "),t.progress>0?r("div",{staticClass:"progress-text"},[t._v(t._s(~~t.progress)+"%")]):t._e()]),t._v(" "),t.src&&!t.progress?r("a",{attrs:{href:t.src,target:"_blank"}},[r("i",{staticClass:"glyphicon glyphicon-zoom-in"}),t._v(" 新窗口打开")]):t._e()])},staticRenderFns:[]}},function(t,e,r){var i=r(5);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);r(2)("2e48a82e",i,!0)},function(t,e,r){var i=r(6);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);r(2)("46792bcc",i,!0)},function(t,e){t.exports=function(t,e){for(var r=[],i={},s=0;s<e.length;s++){var n=e[s],a=n[0],o=n[1],l=n[2],u=n[3],c={id:t+":"+s,css:o,media:l,sourceMap:u};i[a]?i[a].parts.push(c):r.push(i[a]={id:a,parts:[c]})}return r}},,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["value","name"],data:function(){return{list:this.parseValue(this.value)}},computed:{json:function(){return JSON.stringify(this.list)}},methods:{parseValue:function(t){var e=t;try{e="string"==typeof t?JSON.parse(t):t}catch(t){e=[]}return JSON.parse(JSON.stringify(e instanceof Array?e:[]))},create:function(){this.list.push({})},remove:function(t){this.list.splice(t,1)}},watch:{value:function(t){var e=this;this.$set(this,"list",this.parseValue(t)),this.$refs.action instanceof Array&&this.$refs.action.forEach(function(t,r){t.load(e.list[r])})}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{fields:{url:{title:"网址",placeholder:"https://",type:"url"},target:{title:"跳转方式",type:"radio",defaultValue:"_self",list:{_self:"当前页面跳转",_blank:"新窗口打开"}}}}},activated:function(){this.$emit("input",this.fields)}}},function(t,e,r){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["settings","value"],data:function(){return{radioName:Math.random()}},computed:{checked:function(){return this.value?[].concat(this.value):[]},config:function(){var t="string"==typeof this.settings?{title:this.settings,type:"text",value:""}:this.settings;return!t.value||"checkbox"!=t.type&&!t.multiple||t.value instanceof Array||(t.value=[].concat(t.value)),t}},methods:{change:function(t){"number"==this.config.type&&(t=Number(t)),this.$emit("input",t)},multi:function(t){var e=this.checked.indexOf(t.value);e>-1&&this.checked.splice(e,1),t.checked&&this.checked.push(t.value),this.$emit("input",this.checked)},select:function(t){var e=[].concat(i(t.options)).filter(function(t){return t.selected}).map(function(t){return t.value}),r=t.multiple?e:e[0];this.$emit("input",r)}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},n={redirect:"跳转链接"};for(var a in n)Vue.component("action-method-"+a,r(31)("./action-method-"+a+".vue"));e.default={props:["value","k","name"],beforeCreate:function(){this.$store=new Vuex.Store({state:{title:"",img:"",method:"",parameters:{},fields:{}},mutations:{fill:function(t,e){e=JSON.parse(JSON.stringify(e)),Vue.set(t,"title",e.title||null),Vue.set(t,"img",e.img||null),Vue.set(t,"parameters",e.parameters||{}),Vue.set(t,"method",e.method||"redirect")},setFields:function(t){var e={},r=JSON.parse(JSON.stringify(t.parameters));for(var i in t.fields)e[i]=r&&r[i]?r[i]:"string"==typeof t.fields[i]?null:void 0!==t.fields[i].defaultValue?t.fields[i].defaultValue:null;Vue.set(t,"parameters",e)}}})},data:function(){return{}},created:function(){this.$store.commit("fill",this.parseValue(this.value))},computed:s({},Vuex.mapState(["title","img","parameters","method","fields"]),{json:function(){return JSON.stringify(this.returnValue())},methods:function(){return n}}),methods:s({},Vuex.mapMutations(["fill"]),{parseValue:function(t){if("string"==typeof t)try{return JSON.parse(t)}catch(t){return{}}else if("object"==(void 0===t?"undefined":i(t)))return JSON.parse(JSON.stringify(t));return{}},returnValue:function(){var t=this,e={};return["title","img","method","parameters"].forEach(function(r){return e[r]=t.$store.state[r]}),e},remove:function(){this.$emit("remove",this.k)},load:function(t){this.$store.commit("fill",t),t.method==this.method&&this.$store.commit("setFields")}}),watch:{title:function(t){this.$emit("input",this.returnValue())},img:function(){this.$emit("input",this.returnValue())},method:function(t){this.$emit("input",this.returnValue())},parameters:function(){this.$emit("input",this.returnValue())},fields:function(){this.$store.commit("setFields")}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["value","maxsize"],data:function(){return{uploader:null,src:this.value,progress:!1}},computed:{options:function(){return{filesize:this.maxsize?this.maxsize:2097152,pick_id:~~(1e6*Math.random()),filetype:"jpg,jpeg,png,gif,bmp,webp,svg"}}},mounted:function(){this.setThumb(this.src),this.uploader=WebUploader.create({swf:LP.baseuri+"static/js/webuploader/Uploader.swf",server:LP.baseuri+"attachment/uploader?of=json",pick:{id:document.getElementById(this.options.pick_id),multiple:!1},formData:{},fileVal:"Filedata",method:"POST",sendAsBinary:!1,fileNumLimit:0,fileSingleSizeLimit:this.options.filesize,duplicate:!1,accept:{title:"请选择图片",extensions:this.options.filetype},chunked:!1,thumb:{width:200,height:200,quality:70,allowMagnify:!1,crop:!0},resize:!1,compress:null}),this.uploader.on("beforeFileQueued",this.beforeFileQueued),this.uploader.on("fileQueued",this.fileQueued),this.uploader.on("uploadBeforeSend",this.uploadBeforeSend),this.uploader.on("uploadStart",this.uploadStart),this.uploader.on("uploadProgress",this.uploadProgress),this.uploader.on("uploadSuccess",this.uploadSuccess),this.uploader.on("uploadError",this.uploadError),this.uploader.on("uploadComplete",this.uploadComplete),this.uploader.on("error",this.error)},watch:{src:function(t){this.$emit("input",t)}},methods:{setThumb:function(t){t||(t=LP.baseuri+"plugins/img/select-img.png"),jQuery("#thumb-"+this.options.pick_id+" img").attr("src",t)},beforeFileQueued:function(t){if(this.options.filetype.split(",").indexOf(t.ext.toLowerCase())==-1)return jQuery.alert("只能上传图片文件"),!1},fileQueued:function(t){var e=this;return this.uploader.makeThumb(t,function(r,i){r||e.setThumb(i),e.uploader.upload(t)}),!0},uploadBeforeSend:function(t,e,r){},uploadStart:function(t){this.progress=!1},uploadProgress:function(t,e){this.progress=100*e},uploadSuccess:function(t,e){"success"!=e.result&&"api"!=e.result||(this.src=e.data.url),this.setThumb(this.src),this.progress=!1},uploadError:function(t,e){jQuery.alert(e),this.setThumb(this.src),this.uploader.cancelFile(t),this.progress=!1},uploadComplete:function(t){this.uploader.cancelFile(t),this.progress=!1},error:function(t,e,r){switch(t){case"Q_EXCEED_NUM_LIMIT":jQuery.alert("同时上传的文件数量超出限制。");break;case"Q_EXCEED_SIZE_LIMIT":jQuery.alert("文件总大小超出限制。");break;case"F_EXCEED_SIZE":jQuery.alert("文件超出"+this.options.filesize/1024/1024+"MB");break;case"F_DUPLICATE":jQuery.alert("重复文件");break;case"Q_TYPE_DENIED":jQuery.alert("只能是如下类型的文件："+this.options.filetype);break;default:jQuery.alert(t)}this.setThumb(this.src),this.uploader.cancelFile(r)}}}},function(t,e,r){function i(t){return r(s(t))}function s(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var n={"./action-method-redirect.vue":10};i.keys=function(){return Object.keys(n)},i.resolve=s,t.exports=i,i.id=31},,function(t,e,r){t.exports=r(4)}]);