!function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=33)}([function(e,t){e.exports=function(e,t,i,r){var n,s=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(n=e,s=e.default);var a="function"==typeof s?s.options:s;if(t&&(a.render=t.render,a.staticRenderFns=t.staticRenderFns),i&&(a._scopeId=i),r){var l=a.computed||(a.computed={});Object.keys(r).forEach(function(e){var t=r[e];l[e]=function(){return t}})}return{esModule:n,exports:s,options:a}}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},n=0;n<this.length;n++){var s=this[n][0];"number"==typeof s&&(r[s]=!0)}for(n=0;n<t.length;n++){var o=t[n];"number"==typeof o[0]&&r[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),e.push(o))}},e}},function(e,t,i){function r(e){for(var t=0;t<e.length;t++){var i=e[t],r=c[i.id];if(r){r.refs++;for(var n=0;n<r.parts.length;n++)r.parts[n](i.parts[n]);for(;n<i.parts.length;n++)r.parts.push(o(i.parts[n]));r.parts.length>i.parts.length&&(r.parts.length=i.parts.length)}else{for(var s=[],n=0;n<i.parts.length;n++)s.push(o(i.parts[n]));c[i.id]={id:i.id,refs:1,parts:s}}}}function n(e,t){for(var i=[],r={},n=0;n<t.length;n++){var s=t[n],o=s[0],a=s[1],l=s[2],u=s[3],c={css:a,media:l,sourceMap:u};r[o]?(c.id=e+":"+r[o].parts.length,r[o].parts.push(c)):(c.id=e+":0",i.push(r[o]={id:o,parts:[c]}))}return i}function s(){var e=document.createElement("style");return e.type="text/css",p.appendChild(e),e}function o(e){var t,i,r=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]'),n=null!=r;if(n&&m)return h;if(v){var o=f++;r=d||(d=s()),t=a.bind(null,r,o,!1),i=a.bind(null,r,o,!0)}else r=r||s(),t=l.bind(null,r),i=function(){r.parentNode.removeChild(r)};return n||t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else i()}}function a(e,t,i,r){var n=i?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,n);else{var s=document.createTextNode(n),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function l(e,t){var i=t.css,r=t.media,n=t.sourceMap;if(r&&e.setAttribute("media",r),n&&(i+="\n/*# sourceURL="+n.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var u="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!u)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var n=i(23),c={},p=u&&(document.head||document.getElementsByTagName("head")[0]),d=null,f=0,m=!1,h=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,i){m=i;var s=n(e,t);return r(s),function(t){for(var i=[],o=0;o<s.length;o++){var a=s[o],l=c[a.id];l.refs--,i.push(l)}t?(s=n(e,t),r(s)):s=[];for(var o=0;o<i.length;o++){var l=i[o];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete c[l.id]}}}};var g=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},,function(e,t,i){"use strict";Vue.component("action",i(12)),Vue.component("action-list",i(9)),Vue.component("action-parameter",i(11)),Vue.component("image-upload",i(13))},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".action-parameter .page-header{margin:0 0 5px}.action-remove{margin-right:25px}",""])},function(e,t,i){t=e.exports=i(1)(),t.push([e.i,".image-upload .thumb,.image-upload .webuploader-pick{width:200px;height:200px;background-color:transparent;padding:0}.image-upload .thumb,.image-upload .thumb .progress-text{top:0;line-height:200px;text-align:center;position:absolute}.image-upload{position:relative}.image-upload .webuploader-container{z-index:3}.image-upload .webuploader-pick{border:0}.image-upload .pick{height:200px;width:200px;display:block}.image-upload .thumb{left:0;z-index:1;display:table-cell;vertical-align:middle;margin:0}.image-upload .thumb img{max-width:200px;max-height:200px;vertical-align:middle}.image-upload .thumb .progress{width:100%;position:absolute;left:0;top:0;height:100%;background-color:rgba(0,0,0,.8)}.image-upload .thumb .progress-text{width:100%;left:0;height:100%;color:#fff;z-index:2}",""])},,,function(e,t,i){var r=i(0)(i(26),i(16),null,null);e.exports=r.exports},function(e,t,i){var r=i(0)(i(27),i(17),null,null);e.exports=r.exports},function(e,t,i){var r=i(0)(i(28),i(15),null,null);e.exports=r.exports},function(e,t,i){i(21);var r=i(0)(i(29),i(18),null,null);e.exports=r.exports},function(e,t,i){i(22);var r=i(0)(i(30),i(20),null,null);e.exports=r.exports},,function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-2",attrs:{for:""}},[e._v(e._s(e.config.title))]),e._v(" "),i("div",{staticClass:"col-sm-10"},[["select","radio","checkbox"].indexOf(e.config.type)==-1?i("input",{staticClass:"form-control",attrs:{type:e.config.type?e.config.type:"text",placeholder:e.config.placeholder?e.config.placeholder:"["+e.config.title+"]"},domProps:{value:e.value},on:{input:function(t){e.change(t.target.value)}}}):"radio"==e.config.type?i("div",{},[e._l(e.config.list,function(t,r){return i("label",{staticClass:"radio-inline"},[i("input",{attrs:{type:"radio",name:e.radioName},domProps:{value:r,checked:e.value==r},on:{change:function(t){e.change(t.target.value)}}}),e._v(" "+e._s(t)+"\r\n\t\t\t")])}),e._v(" "),i("div",{staticClass:"clearfix"})],2):"checkbox"==e.config.type?i("div",{},[e._l(e.config.list,function(t,r){return i("label",{staticClass:"checkbox-inline"},[i("input",{attrs:{type:"checkbox"},domProps:{value:r,checked:e.value instanceof Array&&e.value.indexOf(r)>-1},on:{change:function(t){e.multi(t.target)}}}),e._v(" "+e._s(t)+"\r\n\t\t\t")])}),e._v(" "),i("div",{staticClass:"clearfix"})],2):i("select",{staticClass:"form-control",attrs:{multiple:e.config.multiple},on:{change:function(t){e.select(t.target)}}},e._l(e.config.list,function(t,r){return i("option",{domProps:{value:r,selected:e.value instanceof Array?e.value.indexOf(r)>-1:r==e.value}},[e._v(e._s(t))])}))]),e._v(" "),i("div",{staticClass:"clearfix"})])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container12"},[e._l(e.list,function(t,r){return i("action",{attrs:{k:r,name:e.name+"-"+r},on:{remove:e.remove},model:{value:e.list[r],callback:function(t){var i=e.list,n=r;Array.isArray(i)?i.splice(n,1,t):e.list[r]=t}}})}),e._v(" "),e.multiple?i("a",{attrs:{href:"javascript:void(0);"},on:{click:e.create}},[i("i",{staticClass:"glyphicon glyphicon-plus"}),e._v(" 新增一条")]):e._e(),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.json,expression:"json"}],staticClass:"form-control hidden",attrs:{rows:"10",name:e.name},domProps:{value:e.json},on:{input:function(t){t.target.composing||(e.json=t.target.value)}}})],2)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",e._l(e.fields,function(t,r){return i("action-parameter",{attrs:{settings:t},model:{value:e.value[r],callback:function(t){var i=e.value,n=r;Array.isArray(i)?i.splice(n,1,t):e.value[r]=t}}})}))},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{},[i("div",{staticClass:"page-header"},[i("h3",[e._v("\r\n\t\t\t"+e._s(e.title?e.title:"未命名")+"\r\n\t\t\t"),e.$store.state.multiple?i("span",{staticClass:"pull-right action-remove"},[i("a",{attrs:{href:"javascript:"},on:{click:function(t){e.remove()}}},[e._v("×")])]):e._e()])]),e._v(" "),i("div",{staticClass:"col-sm-6"},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-2 control-label",attrs:{for:""}},[e._v("标题：")]),e._v(" "),i("div",{staticClass:"col-sm-10"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"clearfix"})]),e._v(" "),i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-2 control-label",attrs:{for:""}},[e._v("图片：")]),e._v(" "),i("div",{staticClass:"col-sm-10"},[i("image-upload",{model:{value:e.img,callback:function(t){e.img=t}}})],1),e._v(" "),i("div",{staticClass:"clearfix"})])]),e._v(" "),i("div",{staticClass:"action-parameter col-sm-6"},[i("div",{staticClass:"form-group"},[i("label",{staticClass:"col-sm-2",attrs:{for:""}},[e._v("类型：")]),e._v(" "),i("div",{staticClass:"col-sm-10"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.method,expression:"method"}],staticClass:"form-control",on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.method=t.target.multiple?i:i[0]}}},e._l(e.methods,function(t,r){return i("option",{domProps:{value:r}},[e._v(e._s(t))])}))]),e._v(" "),i("div",{staticClass:"clearfix"})]),e._v(" "),i("div",{staticClass:"form-group"},[e._m(0),e._v(" "),i("div",{staticClass:"clearfix"}),e._v(" "),i("keep-alive",[i("action-method-"+e.method,{tag:"component",on:{fieldsChanged:e.fieldsChanged},model:{value:e.parameters,callback:function(t){e.parameters=t}}})],1)],1)]),e._v(" "),i("div",{staticClass:"clearfix"}),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.json,expression:"json"}],staticClass:"form-control hidden",attrs:{rows:"10",name:e.name},domProps:{value:e.json},on:{input:function(t){t.target.composing||(e.json=t.target.value)}}})])},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-sm-12"},[i("h5",{staticClass:"page-header"},[e._v("参数：")])])}]}},,function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"image-upload"},[i("div",{staticClass:"pick",attrs:{id:e.options.pick_id}}),e._v(" "),i("div",{staticClass:"thumb",attrs:{id:"thumb-"+e.options.pick_id}},[i("img",{attrs:{src:"plugins/img/select-img.png",alt:""}}),e._v(" "),e.progress>0?i("div",{staticClass:"progress",style:{height:~~(100-e.progress)+"%"}}):e._e(),e._v(" "),e.progress>0?i("div",{staticClass:"progress-text"},[e._v(e._s(~~e.progress)+"%")]):e._e()]),e._v(" "),e.src&&!e.progress?i("a",{attrs:{href:e.src,target:"_blank"}},[i("i",{staticClass:"glyphicon glyphicon-zoom-in"}),e._v(" 新窗口打开")]):e._e()])},staticRenderFns:[]}},function(e,t,i){var r=i(5);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);i(2)("2e48a82e",r,!0)},function(e,t,i){var r=i(6);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);i(2)("46792bcc",r,!0)},function(e,t){e.exports=function(e,t){for(var i=[],r={},n=0;n<t.length;n++){var s=t[n],o=s[0],a=s[1],l=s[2],u=s[3],c={id:e+":"+n,css:a,media:l,sourceMap:u};r[o]?r[o].parts.push(c):i.push(r[o]={id:o,parts:[c]})}return i}},,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){var i=e;try{i="string"==typeof e?JSON.parse(e):e}catch(e){i=[]}return t||"object"!=(void 0===i?"undefined":n(i))||i instanceof Array?!t||i instanceof Array||(i=[]):i=[].concat(i),JSON.parse(JSON.stringify(i instanceof Array?i:[]))},o=function(){return new Vuex.Store({state:{list:[],fields:[],multiple:!1},getters:{},mutations:{setMulti:function(e){e.multiple=!0},create:function(e,t){var i={title:"",img:"",method:"redirect",parameters:{}};t&&(t=JSON.parse(JSON.stringify(t)),i.title=t.title||i.title,i.img=t.img||i.img,i.method=t.method||i.method,i.parameters=t.parameters||i.parameters),e.fields.push({}),e.list.push(i)},remove:function(e,t){e.fields.splice(t,1),e.list.splice(t,1)},removeAll:function(e){e.fields.splice(0,e.fields.length),e.list.splice(0,e.list.length)},setFields:function(e,t){var i=t.k,r=t.fields;if(void 0!==r){e.fields[i]=r;var n={},s=JSON.parse(JSON.stringify(e.list[i].parameters));for(var o in r)n[o]=s&&s[o]?s[o]:"string"==typeof r[o]?null:void 0!==r[o].defaultValue?r[o].defaultValue:null;e.list[i].parameters=n}}}})};t.default={props:["value","name","multiple"],beforeCreate:function(){this.$store=o()},created:function(){this.multiple&&this.$store.commit("setMulti"),this.load(this.value)},computed:r({},Vuex.mapState(["list","fields"]),{json:function(){var e=this.multiple?this.$store.state.list:this.$store.state.list[0]?this.$store.state.list[0]:{};return JSON.stringify(e)}}),methods:r({},Vuex.mapMutations(["create","remove","removeAll"]),{load:function(e){for(var t=s(e,this.multiple),i=0;i<t.length;++i)this.$store.commit("create",t[i])}}),watch:{value:function(e){this.removeAll(),this.load(e)}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["value"],data:function(){return{fields:{url:{title:"网址",placeholder:"https://",type:"url"},target:{title:"跳转方式",type:"radio",defaultValue:"_self",list:{_self:"当前页面跳转",_blank:"新窗口打开"}}}}},activated:function(){this.$emit("fieldsChanged",this.fields)}}},function(e,t,i){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["settings","value"],data:function(){return{radioName:Math.random()}},computed:{checked:function(){return this.value?[].concat(this.value):[]},config:function(){var e="string"==typeof this.settings?{title:this.settings,type:"text",value:""}:this.settings;return!e.value||"checkbox"!=e.type&&!e.multiple||e.value instanceof Array||(e.value=[].concat(e.value)),e}},methods:{change:function(e){"number"==this.config.type&&(e=Number(e)),this.$emit("input",e)},multi:function(e){var t=this.checked.indexOf(e.value);t>-1&&this.checked.splice(t,1),e.checked&&this.checked.push(e.value),this.$emit("input",this.checked)},select:function(e){var t=[].concat(r(e.options)).filter(function(e){return e.selected}).map(function(e){return e.value}),i=e.multiple?t:t[0];this.$emit("input",i)}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={redirect:"跳转链接"};for(var n in r)Vue.component("action-method-"+n,i(31)("./action-method-"+n+".vue"));t.default={props:["value","k","name"],data:function(){return{}},created:function(){},computed:{title:{set:function(e){this.value.title=e},get:function(){return this.value.title||""}},img:{set:function(e){this.value.img=e},get:function(){return this.value.img}},method:{set:function(e){this.value.method=e},get:function(){return this.value.method}},parameters:{set:function(e){this.value.parameters=e},get:function(){return this.value.parameters}},json:function(){return JSON.stringify(this.returnValue())},methods:function(){return r}},methods:{fieldsChanged:function(e){this.$store.commit("setFields",{k:this.k,fields:e})},returnValue:function(){var e=this,t={};return["title","img","method","parameters"].forEach(function(i){return t[i]=e[i]}),t},remove:function(){this.$emit("remove",this.k)}},watch:{}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["value","maxsize"],data:function(){return{uploader:null,src:this.value,progress:!1}},computed:{options:function(){return{filesize:this.maxsize?this.maxsize:2097152,pick_id:~~(1e6*Math.random()),filetype:"jpg,jpeg,png,gif,bmp,webp,svg"}}},mounted:function(){this.setThumb(this.src),this.uploader=WebUploader.create({swf:LP.baseuri+"static/js/webuploader/Uploader.swf",server:LP.baseuri+"attachment/uploader?of=json",pick:{id:document.getElementById(this.options.pick_id),multiple:!1},formData:{},fileVal:"Filedata",method:"POST",sendAsBinary:!1,fileNumLimit:0,fileSingleSizeLimit:this.options.filesize,duplicate:!1,accept:{title:"请选择图片",extensions:this.options.filetype},chunked:!1,thumb:{width:200,height:200,quality:70,allowMagnify:!1,crop:!0},resize:!1,compress:null}),this.uploader.on("beforeFileQueued",this.beforeFileQueued),this.uploader.on("fileQueued",this.fileQueued),this.uploader.on("uploadBeforeSend",this.uploadBeforeSend),this.uploader.on("uploadStart",this.uploadStart),this.uploader.on("uploadProgress",this.uploadProgress),this.uploader.on("uploadSuccess",this.uploadSuccess),this.uploader.on("uploadError",this.uploadError),this.uploader.on("uploadComplete",this.uploadComplete),this.uploader.on("error",this.error)},watch:{src:function(e){this.$emit("input",e)}},methods:{setThumb:function(e){e||(e=LP.baseuri+"plugins/img/select-img.png"),jQuery("#thumb-"+this.options.pick_id+" img").attr("src",e)},beforeFileQueued:function(e){if(this.options.filetype.split(",").indexOf(e.ext.toLowerCase())==-1)return jQuery.alert("只能上传图片文件"),!1},fileQueued:function(e){var t=this;return this.uploader.makeThumb(e,function(i,r){i||t.setThumb(r),t.uploader.upload(e)}),!0},uploadBeforeSend:function(e,t,i){},uploadStart:function(e){this.progress=!1},uploadProgress:function(e,t){this.progress=100*t},uploadSuccess:function(e,t){"success"!=t.result&&"api"!=t.result||(this.src=t.data.url),this.setThumb(this.src),this.progress=!1},uploadError:function(e,t){jQuery.alert(t),this.setThumb(this.src),this.uploader.cancelFile(e),this.progress=!1},uploadComplete:function(e){this.uploader.cancelFile(e),this.progress=!1},error:function(e,t,i){switch(e){case"Q_EXCEED_NUM_LIMIT":jQuery.alert("同时上传的文件数量超出限制。");break;case"Q_EXCEED_SIZE_LIMIT":jQuery.alert("文件总大小超出限制。");break;case"F_EXCEED_SIZE":jQuery.alert("文件超出"+this.options.filesize/1024/1024+"MB");break;case"F_DUPLICATE":jQuery.alert("重复文件");break;case"Q_TYPE_DENIED":jQuery.alert("只能是如下类型的文件："+this.options.filetype);break;default:jQuery.alert(e)}this.setThumb(this.src),this.uploader.cancelFile(i)}}}},function(e,t,i){function r(e){return i(n(e))}function n(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var s={"./action-method-redirect.vue":10};r.keys=function(){return Object.keys(s)},r.resolve=n,e.exports=r,r.id=31},,function(e,t,i){e.exports=i(4)}]);