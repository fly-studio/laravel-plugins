!function(e){function t(r){if(o[r])return o[r].exports;var a=o[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var o={};t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=32)}({0:function(e,t){e.exports=function(e,t,o,r){var a,n=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(a=e,n=e.default);var d="function"==typeof n?n.options:n;if(t&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns),o&&(d._scopeId=o),r){var s=d.computed||(d.computed={});Object.keys(r).forEach(function(e){var t=r[e];s[e]=function(){return t}})}return{esModule:a,exports:n,options:d}}},14:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("form",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.node.parent.id,expression:"typeof node.parent.id != 'undefined'"}],staticClass:"form-horizontal form-bordered",attrs:{action:e.action,method:"POST",id:"form"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.csrf,expression:"csrf"}],attrs:{type:"hidden",name:"_token"},domProps:{value:e.csrf},on:{input:function(t){t.target.composing||(e.csrf=t.target.value)}}}),e._v(" "),o("input",{attrs:{type:"hidden",name:"_method"},domProps:{value:e.method}}),e._v(" "),o("div",{staticClass:"form-group"},[o("div",{staticClass:"col-sm-10 col-sm-offset-2"},[o("h1",[e._v(e._s(void 0!==e.node.id?"修改 "+e.node.name:"新建子项"))])])]),e._v(" "),o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-sm-2 control-label",attrs:{for:"name"}},[e._v("名称")]),e._v(" "),o("div",{staticClass:"col-sm-10"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.node.name,expression:"node.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",placeholder:"请输入名称",disabled:void 0!==e.node.id},domProps:{value:e.node.name},on:{input:function(t){t.target.composing||(e.node.name=t.target.value)}}}),e._v(" "),e._m(0)])]),e._v(" "),o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-sm-2 control-label",attrs:{for:"name"}},[e._v("父级")]),e._v(" "),o("div",{staticClass:"col-sm-10"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.node.parent.id,expression:"node.parent.id"}],attrs:{type:"hidden",id:"pid",name:"pid"},domProps:{value:e.node.parent.id},on:{input:function(t){t.target.composing||(e.node.parent.id=t.target.value)}}}),e._v(" "),o("p",{staticClass:"form-control-static",attrs:{id:"p-title"}},[e._v(e._s(e.node.parent.title))])])]),e._v(" "),o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-sm-2 control-label",attrs:{for:"title"}},[e._v("标题")]),e._v(" "),o("div",{staticClass:"col-sm-10"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.node.title,expression:"node.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",name:"title",placeholder:"请输入标题"},domProps:{value:e.node.title},on:{input:function(t){t.target.composing||(e.node.title=t.target.value)}}}),e._v(" "),e._m(1)])]),e._v(" "),o("keep-alive",[o(e.catalogExtra,{tag:"component",attrs:{node:e.node}})],1),e._v(" "),o("div",{staticClass:"form-group"},[o("div",{staticClass:"col-sm-10 col-sm-offset-2 text-center"},[o("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:void 0===e.node.parent.id}},[e._v("保存")])])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"help-block"},[e._v("对内名称，同层级下唯一，只允许英文、数字、[ - ]、[ _ ]、[ . ]，"),o("b",[e._v("设置后无法修改")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"help-block"},[e._v("对外显示的标题，"),o("b")])}]}},19:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-sm-2 control-label",attrs:{for:"extra-description"}},[e._v("栏目介绍")]),e._v(" "),o("div",{staticClass:"col-sm-10"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.node.extra.description,expression:"node.extra.description"}],staticClass:"form-control",attrs:{id:"extra-description",name:"extra[description]",placeholder:"请输入栏目介绍",rows:"10"},domProps:{value:e.node.extra.description},on:{input:function(t){t.target.composing||(e.node.extra.description=t.target.value)}}}),e._v(" "),e._m(0)])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"help-block"},[e._v("选填，本栏目的文字介绍"),o("b")])}]}},24:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["node"],data:function(){return{}},mounted:function(){var e=jQuery("#form");jQuery("a[method]",e).query()}}},25:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["csrf","urlPrefix"],data:function(){return{action:"",method:"",catalogExtra:"",node:{parent:{},extra:{}}}},mounted:function(){var e=jQuery("#form").query();jQuery("a[method]",e).query()},methods:{get:function(e){var t=this;return LP.get(this.urlPrefix+"/"+e+"?of=json").done(function(e){void 0===e.data||e.data.extra||(e.data.extra={});var o=[e.data.name],r=!0,a=!1,n=void 0;try{for(var i,d=e.data.parents[Symbol.iterator]();!(r=(i=d.next()).done);r=!0){var s=i.value;o.push(s.name)}}catch(e){a=!0,n=e}finally{try{!r&&d.return&&d.return()}finally{if(a)throw n}}o.reverse(),t.extraTemplate(o)})},extraTemplate:function(e){var t=["catalog-extra"],o=!0,r=!1,a=void 0;try{for(var n,i=e[Symbol.iterator]();!(o=(n=i.next()).done);o=!0){var d=n.value;t.push(t[t.length-1]+"-"+d)}}catch(e){r=!0,a=e}finally{try{!o&&i.return&&i.return()}finally{if(r)throw a}}t.reverse();var s=!0,l=!1,c=void 0;try{for(var u,f=t[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var m=u.value;if(void 0!==Vue.options.components[m])return void(this.catalogExtra=m)}}catch(e){l=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(l)throw c}}this.catalogExtra=""},create:function(e){var t=this;this.get(e).done(function(e){t.action=t.urlPrefix,t.method="POST",t.node={parent:e.data,extra:{}}})},edit:function(e){var t=this;this.get(e).done(function(o){t.action=t.urlPrefix+"/"+e,t.method="PUT",t.node=o.data})}}}},3:function(e,t,o){"use strict";void 0===Vue.options.components["catalog-normal"]&&Vue.component("catalog-normal",o(8)),void 0===Vue.options.components["catalog-extra-site"]&&Vue.component("catalog-extra-site",o(7)),function(e){e().ready(function(){e("a[method]").query();var t=e("#catalog-form").attr("url-prefix"),o=new Vue({el:"#catalog-form",data:function(){return{catalogContainer:"undefined"!=typeof RootData&&void 0!==RootData.name&&Vue.options.components["catalog-"+RootData.name]?"catalog-"+RootData.name:"catalog-normal",urlPrefix:t}},methods:{create:function(e,t){this.$refs["catalog-form-container"].create(e,t)},edit:function(e,t){this.$refs["catalog-form-container"].edit(e,t)}},mounted:function(){e("a[method]",e("#form").query()).query()}}),r={},a={curDragNodes:null},n=null;e('[name="catalog/list"]').addClass("active").parents("li").addClass("active"),r.addHoverDom=function(t,r){var a=e("#"+r.tId+"_span");if(!(r.editNameFlag||e("#addBtn_"+r.tId).length>0)&&n.setting.edit.enable){var i="<span class='button add' id='addBtn_"+r.tId+"' title='添加子项' onfocus='this.blur();'></span>";a.after(i);e("#addBtn_"+r.tId).off("click").on("click",function(){return n.selectNode(r),o.create(r.id,r.tId),!1})}},r.removeHoverDom=function(t,o){e("#addBtn_"+o.tId).off().remove()},r.dropPrev=function(e,t,o){for(var r=(o.getParentNode(),0),n=a.curDragNodes.length;r<n;r++){var i=a.curDragNodes[r].getParentNode();if(i&&i!==o.getParentNode()&&i.childOuter===!1)return!1}return!0},r.dropNext=r.dropPrev,r.beforeDrag=function(e,t){for(var o=0,r=t.length;o<r;o++){if(t[o].drag===!1)return a.curDragNodes=null,!1;if(t[o].parentTId&&t[o].getParentNode().childDrag===!1)return a.curDragNodes=null,!1}return a.curDragNodes=t,!0},r.beforeDrop=function(e,o,r,a){if(!o.length||!r)return!1;var i=o[0];return i.parentTId==r.parentTId&&(LP.queryTip("PUT",t+"/move",{original_id:i.id,target_id:r.id,move_type:a}).done(function(e){var t=n.getNodeByParam("id",e.data.original_id,null),o=n.getNodeByParam("id",e.data.target_id,null);n.moveNode(o,t,e.data.move_type)}),!1)},r.beforeRemove=function(o,r){return n.selectNode(r),e.confirm('<p style="text-align:left;">你<b>确认删除</b>此项：<span style="color:red">['+r.title+"]</span>，此操作是不可恢復的</p>",function(){e.LP.queryTip("DELETE",t+"/"+r.id)}),!1},r.showRemoveBtn=function(e,t){return!t.isParent&&0!=~~t.level},r.onclick=function(t,r,a){0!=~~a.id?(e.bbq.pushState({id:a.id}),o.edit(a.id,a.tId)):(e.bbq.pushState({id:a.id}),o.create(a.id,a.tId))};var i={view:{addHoverDom:r.addHoverDom,removeHoverDom:r.removeHoverDom,selectedMulti:!1},edit:{enable:!0,editNameSelectAll:!0,removeTitle:"删除此项",showRemoveBtn:r.showRemoveBtn,showRenameBtn:!1,drag:{isCopy:!1,autoExpandTrigger:!0,prev:r.dropPrev,inner:!1,next:r.dropNext}},callback:{beforeDrag:r.beforeDrag,beforeDrop:r.beforeDrop,beforeRemove:r.beforeRemove,onClick:r.onclick},data:{simpleData:{enable:!0,idKey:"id",pIdKey:"pid",rootPId:0},key:{name:"title"}}};n=e.fn.zTree.init(e("#tree"),i,TreeData),n.expandAll(!0);var d=e.bbq.getState();if(!isNaN(d.id)){var s=n.getNodeByParam("id",d.id);n.selectNode(s,!1,!0),r.onclick({},s.tId,s)}n.expandNode(s,!0)})}(window.jQuery)},32:function(e,t,o){e.exports=o(3)},7:function(e,t,o){var r=o(0)(o(24),o(19),null,null);e.exports=r.exports},8:function(e,t,o){var r=o(0)(o(25),o(14),null,null);e.exports=r.exports}});