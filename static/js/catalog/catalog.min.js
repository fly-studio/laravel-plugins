!function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="./",t(t.s=8)}([function(e,t){e.exports=function(e,t,o,n){var r,a=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(r=e,a=e.default);var d="function"==typeof a?a.options:a;if(t&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns),o&&(d._scopeId=o),n){var s=d.computed||(d.computed={});Object.keys(n).forEach(function(e){var t=n[e];s[e]=function(){return t}})}return{esModule:r,exports:a,options:d}}},function(e,t,o){"undefined"==typeof Vue.options.components["catalog-normal"]&&Vue.component("catalog-normal",o(3)),"undefined"==typeof Vue.options.components["catalog-extra-site"]&&Vue.component("catalog-extra-site",o(2)),function(e){e().ready(function(){e("a[method]").query();var t=new Vue({el:"#catalog-form",data:function(){return{catalogContainer:"undefined"!=typeof RootData&&"undefined"!=typeof RootData.name&&Vue.options.components["catalog-"+RootData.name]?"catalog-"+RootData.name:"catalog-normal"}},methods:{create:function(e,t){this.$refs["catalog-form-container"].create(e,t)},edit:function(e,t){this.$refs["catalog-form-container"].edit(e,t)}},mounted:function(){var t=e("#form").query();e("a[method]",t).query()}}),o={},n={curDragNodes:null},r=null;e('[name="catalog/list"]').addClass("active").parents("li").addClass("active"),o.addHoverDom=function(o,n){var a=e("#"+n.tId+"_span");if(!(n.editNameFlag||e("#addBtn_"+n.tId).length>0)&&r.setting.edit.enable){var i="<span class='button add' id='addBtn_"+n.tId+"' title='添加子项' onfocus='this.blur();'></span>";a.after(i);var d=e("#addBtn_"+n.tId);d.off("click").on("click",function(){return r.selectNode(n),t.create(n.id,n.tId),!1})}},o.removeHoverDom=function(t,o){e("#addBtn_"+o.tId).off().remove()},o.dropPrev=function(e,t,o){for(var r=(o.getParentNode(),0),a=n.curDragNodes.length;r<a;r++){var i=n.curDragNodes[r].getParentNode();if(i&&i!==o.getParentNode()&&i.childOuter===!1)return!1}return!0},o.dropNext=o.dropPrev,o.beforeDrag=function(e,t){for(var o=0,r=t.length;o<r;o++){if(t[o].drag===!1)return n.curDragNodes=null,!1;if(t[o].parentTId&&t[o].getParentNode().childDrag===!1)return n.curDragNodes=null,!1}return n.curDragNodes=t,!0},o.beforeDrop=function(e,t,o,n){if(!t.length||!o)return!1;var a=t[0];return a.parentTId==o.parentTId&&(LP.queryTip("PUT",LP.baseuri+"admin/catalog/move",{original_id:a.id,target_id:o.id,move_type:n}).done(function(e){var t=r.getNodeByParam("id",e.data.original_id,null),o=r.getNodeByParam("id",e.data.target_id,null);r.moveNode(o,t,e.data.move_type)}),!1)},o.beforeRemove=function(t,o){return r.selectNode(o),e.confirm('<p style="text-align:left;">你<b>确认删除</b>此项：<span style="color:red">['+o.title+"]</span>，此操作是不可恢復的</p>",function(){e.LP.queryTip("DELETE",LP.baseuri+"admin/catalog/"+o.id)}),!1},o.showRemoveBtn=function(e,t){return!t.isParent&&0!==~~t.level},o.onclick=function(e,o,n){0!==~~n.id?t.edit(n.id,n.tId):t.create(n.id,n.tId)};var a={view:{addHoverDom:o.addHoverDom,removeHoverDom:o.removeHoverDom,selectedMulti:!1},edit:{enable:!0,editNameSelectAll:!0,removeTitle:"删除此项",showRemoveBtn:o.showRemoveBtn,showRenameBtn:!1,drag:{isCopy:!1,autoExpandTrigger:!0,prev:o.dropPrev,inner:!1,next:o.dropNext}},callback:{beforeDrag:o.beforeDrag,beforeDrop:o.beforeDrop,beforeRemove:o.beforeRemove,onClick:o.onclick},data:{simpleData:{enable:!0,idKey:"id",pIdKey:"pid",rootPId:0},key:{name:"title"}}};r=e.fn.zTree.init(e("#tree"),a,TreeData);var i=r.expandAll(!0);r.selectNode(i),r.expandNode(i,!0)})}(window.jQuery)},function(e,t,o){var n=o(0)(o(6),o(5),null,null);e.exports=n.exports},function(e,t,o){var n=o(0)(o(7),o(4),null,null);e.exports=n.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("form",{directives:[{name:"show",rawName:"v-show",value:"undefined"!=typeof e.node.parent.id,expression:"typeof node.parent.id != 'undefined'"}],staticClass:"form-horizontal form-bordered",attrs:{action:e.action,method:"POST",id:"form"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.csrf,expression:"csrf"}],attrs:{type:"hidden",name:"_token"},domProps:{value:e._s(e.csrf)},on:{input:function(t){t.target.composing||(e.csrf=t.target.value)}}}),e._v(" "),o("input",{attrs:{type:"hidden",name:"_method"},domProps:{value:e.method}}),e._v(" "),o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-sm-2 control-label",attrs:{for:"name"}},[e._v("名称")]),e._v(" "),o("div",{staticClass:"col-sm-10"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.node.name,expression:"node.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",placeholder:"请输入名称",disabled:"undefined"!=typeof e.node.id},domProps:{value:e._s(e.node.name)},on:{input:function(t){t.target.composing||(e.node.name=t.target.value)}}}),e._v(" "),e._m(0)])]),e._v(" "),o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-sm-2 control-label",attrs:{for:"name"}},[e._v("父级")]),e._v(" "),o("div",{staticClass:"col-sm-10"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.node.parent.id,expression:"node.parent.id"}],attrs:{type:"hidden",id:"pid",name:"pid"},domProps:{value:e._s(e.node.parent.id)},on:{input:function(t){t.target.composing||(e.node.parent.id=t.target.value)}}}),e._v(" "),o("p",{staticClass:"form-control-static",attrs:{id:"p-title"}},[e._v(e._s(e.node.parent.title))])])]),e._v(" "),o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-sm-2 control-label",attrs:{for:"title"}},[e._v("标题")]),e._v(" "),o("div",{staticClass:"col-sm-10"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.node.title,expression:"node.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",name:"title",placeholder:"请输入标题"},domProps:{value:e._s(e.node.title)},on:{input:function(t){t.target.composing||(e.node.title=t.target.value)}}}),e._v(" "),e._m(1)])]),e._v(" "),o("keep-alive",[o(e.catalogExtra,{tag:"component",attrs:{node:e.node}})],1),e._v(" "),o("div",{staticClass:"form-group"},[o("div",{staticClass:"col-sm-10 col-sm-offset-2 text-center"},[o("button",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:"undefined"==typeof e.node.parent.id}},[e._v("保存")])])])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"help-block"},[e._v("对内名称，同层级下唯一，只允许英文、数字、[ - ]、[ _ ]、[ . ]，"),o("b",[e._v("设置后无法修改")])])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"help-block"},[e._v("对外显示的标题，"),o("b")])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"form-group"},[o("label",{staticClass:"col-sm-2 control-label",attrs:{for:"extra-description"}},[e._v("栏目介绍")]),e._v(" "),o("div",{staticClass:"col-sm-10"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.node.extra.description,expression:"node.extra.description"}],staticClass:"form-control",attrs:{id:"extra-description",name:"extra[description]",placeholder:"请输入栏目介绍",rows:"10"},domProps:{value:e._s(e.node.extra.description)},on:{input:function(t){t.target.composing||(e.node.extra.description=t.target.value)}}}),e._v(" "),e._m(0)])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("span",{staticClass:"help-block"},[e._v("选填，本栏目的文字介绍"),o("b")])}]}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["node"],data:function(){return{}},mounted:function(){var e=jQuery("#form");jQuery("a[method]",e).query()}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["csrf","urlPrefix"],data:function(){return{action:"",method:"",catalogExtra:"",node:{parent:{},extra:{}}}},mounted:function(){var e=jQuery("#form").query();jQuery("a[method]",e).query()},methods:{get:function(e){var t=this;return LP.get(this.urlPrefix+"/"+e+"?of=json").done(function(e){"undefined"==typeof e.data||e.data.extra||(e.data.extra={});var o=[e.data.name],n=!0,r=!1,a=void 0;try{for(var i,d=e.data.parents[Symbol.iterator]();!(n=(i=d.next()).done);n=!0){var s=i.value;o.push(s.name)}}catch(e){r=!0,a=e}finally{try{!n&&d.return&&d.return()}finally{if(r)throw a}}o.reverse(),t.extraTemplate(o)})},extraTemplate:function(e){var t=["catalog-extra"],o=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(o=(a=i.next()).done);o=!0){var d=a.value;t.push(t[t.length-1]+"-"+d)}}catch(e){n=!0,r=e}finally{try{!o&&i.return&&i.return()}finally{if(n)throw r}}t.reverse();var s=!0,l=!1,c=void 0;try{for(var u,f=t[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var p=u.value;if("undefined"!=typeof Vue.options.components[p])return void(this.catalogExtra=p)}}catch(e){l=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(l)throw c}}this.catalogExtra=""},create:function(e){var t=this;this.get(e).done(function(e){t.action=t.urlPrefix,t.method="POST",t.node={parent:e.data,extra:{}}})},edit:function(e){var t=this;this.get(e).done(function(o){t.action=t.urlPrefix+"/"+e,t.method="PUT",t.node=o.data})}}}},function(e,t,o){e.exports=o(1)}]);